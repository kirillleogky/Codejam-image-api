!function(t){var e={};function o(c){if(e[c])return e[c].exports;var n=e[c]={i:c,l:!1,exports:{}};return t[c].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,c){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(c,n,function(e){return t[e]}.bind(null,n));return c},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e){const o=Array.from({length:32},()=>Array.from({length:32},()=>"#128594")),c=document.getElementById("canvas");if(c.getContext){const t=c.getContext("2d");t.clearRect(0,0,c.width,c.height),o.forEach((e,o)=>{e.forEach((e,c)=>{t.fillStyle=`${e}`,t.fillRect(4*c,4*o,4,4)})})}const n=document.getElementById("bucket"),r=document.getElementById("choose_color"),a=document.getElementById("pencil");a.classList.add("active");const l=document.getElementById("curr-icon-input"),i=document.querySelector(".curr-icon");i.style.backgroundColor="#01d53c";const d=document.querySelector(".prev-icon"),s=document.querySelector(".red-icon"),u=document.querySelector(".blue-icon");function g(t){t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}function h(t){t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}const f=t=>Math.floor(t/4),y=(t,e)=>e[Math.floor(t/4)];let m,b;l.addEventListener("change",()=>{i.style.backgroundColor=`${l.value}`}),document.addEventListener("click",t=>{if(t.target===c){const e=t.offsetX,r=t.offsetY;let l=0,d=0;if(l=f(Math.ceil(r/100*25)),d=f(Math.ceil(e/100*25)),n.classList.contains("active")){const t=c.getContext("2d");t.clearRect(0,0,c.width,c.height),o.forEach((e,c)=>{e.forEach((e,n)=>{t.fillStyle=`${i.style.backgroundColor}`,o[c][n]=`${i.style.backgroundColor}`,t.fillRect(4*n,4*c,4,4)})}),localStorage.setItem("frame",JSON.stringify(o))}if(a.classList.contains("active")){o[l][d]=`${i.style.backgroundColor}`;const t=c.getContext("2d");t.clearRect(0,0,c.width,c.height),console.log(Math.min(e/4)+" "+Math.min(r/4)),o.forEach((e,o)=>{e.forEach((e,c)=>{t.fillStyle=`${e}`,t.fillRect(4*c,4*o,4,4)})}),localStorage.setItem("frame",JSON.stringify(o))}}if(t.target.closest("#bucket")===n&&g(n),t.target.closest("#choose_color")===r&&g(r),t.target.closest("#pencil")===a&&g(a),t.target.closest(".curr-icon")===i&&(d.style.backgroundColor=`${getComputedStyle(i).backgroundColor}`,l.click()),t.target.closest(".prev-icon")===d&&(i.style.backgroundColor=`${getComputedStyle(d).backgroundColor}`),t.target.closest(".red-icon")===s&&(i.style.backgroundColor=`${getComputedStyle(s).backgroundColor}`),t.target.closest(".blue-icon")===u&&(i.style.backgroundColor=`${getComputedStyle(u).backgroundColor}`),r.classList.contains("active")){if(t.target!==c)return void(i.style.backgroundColor=`${getComputedStyle(t.target).backgroundColor}`);const e=t.offsetX,n=t.offsetY,r=y(e,y(n,o));i.style.backgroundColor=r}}),document.addEventListener("keyup",t=>{"KeyB"===t.code&&h(n),"KeyP"===t.code&&h(a),"KeyC"===t.code&&h(r)});const v=document.querySelector(".canvas_features_block-load"),p=document.querySelector(".canvas_features_block-text"),C=document.querySelector(".canvas_features_block-bw");v.addEventListener("click",()=>{!function(t){fetch(`https://api.unsplash.com/photos/random?query=town,${t}&client_id=98016397a2a858d3d5d19887ed4ca375edb159e3436c37715cc86aed6197614d`).then(t=>t.json()).then(t=>t.urls.small).then(t=>{if(c.getContext){let e=c.getContext("2d");e.imageSmoothingEnabled=!1,e.clearRect(0,0,c.width,c.height);let o=new Image;o.src=t,o.onload=()=>{m=o.width,b=o.height,o.width===o.height&&(m=128,b=128,e.drawImage(o,0,0,128,128)),o.width<o.height&&(m=128*o.width/o.height,b=128,e.drawImage(o,(128-128*o.width/o.height)/2,0,128*o.width/o.height,128)),o.width>o.height&&(m=128,b=128*o.height/o.width,e.drawImage(o,0,(128-128*o.height/o.width)/2,128,128*o.height/o.width))}}})}(p.value)}),C.addEventListener("click",()=>{let t=c.getContext("2d"),e=t.getImageData(0,0,m,b);for(let t=0;t<e.data.length;t+=4){let o=(e.data[t]+e.data[t+1]+e.data[t+2])/3;e.data[t]=o,e.data[t+1]=o,e.data[t+2]=o}t.putImageData(e,0,0,0,0,e.width,e.height)})}]);