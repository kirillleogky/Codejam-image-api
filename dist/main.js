!function(e){var t={};function o(a){if(t[a])return t[a].exports;var c=t[a]={i:a,l:!1,exports:{}};return e[a].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)o.d(a,c,function(t){return e[t]}.bind(null,c));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){const o=Array.from({length:128},()=>Array.from({length:128},()=>"#128594")),a=document.getElementById("canvas"),c=a.getContext("2d"),n=document.getElementById("bucket"),r=document.getElementById("choose_color"),l=document.getElementById("pencil");l.classList.add("active");const s=document.getElementById("curr-icon-input"),i=document.querySelector(".curr-icon");i.style.backgroundColor="#01d53c";const d=document.querySelector(".prev-icon"),u=document.querySelector(".red-icon"),g=document.querySelector(".blue-icon"),m=document.getElementById("128x128_item"),f=document.getElementById("256x256_item"),h=document.getElementById("512x512_item");let y=1,b=1,v=512;function _(e){e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}function k(e){e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}function p(e,t,o){a.width=e,a.height=e;const n=new Image;n.crossOrigin="Anonymous",n.src=localStorage.getItem("saveImage"),n.onload=()=>{if(n.width===n.height&&c.drawImage(n,0,0,e,e),n.width<n.height&&c.drawImage(n,(e-n.width*e/n.height)/2,0,n.width*e/n.height,e),n.width>n.height&&c.drawImage(n,0,(e-n.height*e/n.width)/2,e,n.height*e/n.width),document.querySelector(".canvas_features_block-bw").classList.contains("black_and_white_active")){const e=c.getImageData(0,0,512,512),t=e.data;for(let e=0,o=t.length;e<o;e+=4){const o=.3*t[e]+.59*t[e+1]+.11*t[e+2];t[e]=o,t[e+1]=o,t[e+2]=o}c.putImageData(e,0,0)}},v=e,y=t,b=o}null!==(localStorage.getItem("saveImage")||null)?p(512,1,4):(c.clearRect(0,0,a.width,a.height),o.forEach((e,t)=>{e.forEach((e,o)=>{c.fillStyle=""+e,c.fillRect(4*o,4*t,4,4)})})),s.addEventListener("change",()=>{i.style.backgroundColor=""+s.value}),document.addEventListener("click",e=>{if(e.target===a){const t=e.offsetX,r=e.offsetY;if(n.classList.contains("active")&&(c.clearRect(0,0,a.width,a.height),o.forEach((e,t)=>{e.forEach((e,a)=>{c.fillStyle=""+i.style.backgroundColor,o[t][a]=""+i.style.backgroundColor,c.fillRect(4*a,4*t,4,4)})}),localStorage.setItem("frame",JSON.stringify(o))),l.classList.contains("active")){const e=a.getContext("2d").getImageData(t/y,r/y,b,b),o=i.style.backgroundColor.match(/\b(\d+)\b/g).map(Number);for(let t=0;t<e.data.length;t+=4)[e.data[t],e.data[t+1],e.data[t+2]]=o;c.putImageData(e,t/y,r/y)}}if(e.target.closest("#bucket")===n&&_(n),e.target.closest("#choose_color")===r&&_(r),e.target.closest("#pencil")===l&&_(l),e.target.closest(".curr-icon")===i&&(d.style.backgroundColor=""+getComputedStyle(i).backgroundColor,s.click()),e.target.closest(".prev-icon")===d&&(i.style.backgroundColor=""+getComputedStyle(d).backgroundColor),e.target.closest(".red-icon")===u&&(i.style.backgroundColor=""+getComputedStyle(u).backgroundColor),e.target.closest(".blue-icon")===g&&(i.style.backgroundColor=""+getComputedStyle(g).backgroundColor),r.classList.contains("active")){if(e.target!==a)return void(i.style.backgroundColor=""+getComputedStyle(e.target).backgroundColor);const t=e.offsetX/y,o=e.offsetY/y,c=a.getContext("2d").getImageData(t,o,1,1).data;i.style.backgroundColor=`rgb(${c[0]},${c[1]},${c[2]})`}e.target.closest(".canvas_nav_block-item")===m&&p(128,4,1),e.target.closest(".canvas_nav_block-item")===f&&p(256,2,2),e.target.closest(".canvas_nav_block-item")===h&&p(512,1,4)}),document.addEventListener("keyup",e=>{"KeyB"===e.code&&k(n),"KeyP"===e.code&&k(l),"KeyC"===e.code&&k(r)});const I=document.querySelector(".canvas_features_block-load"),S=document.querySelector(".canvas_features_block-text"),w=document.querySelector(".canvas_features_block-bw");I.addEventListener("click",()=>{(async function(e){const t=`https://api.unsplash.com/photos/random?query=town,${e}&client_id=98016397a2a858d3d5d19887ed4ca375edb159e3436c37715cc86aed6197614d`;try{const e=await fetch(t);return(await e.json()).urls.small}catch(e){throw new Error(e)}})(S.value).then(e=>{a.getContext&&(c.imageSmoothingEnabled=!1,c.clearRect(0,0,a.width,a.height),localStorage.setItem("saveImage",e),localStorage.setItem("isImage","true"),p(v,y,b))})}),w.addEventListener("click",()=>{"true"===localStorage.getItem("isImage")?w.classList.contains("black_and_white_active")?(w.classList.remove("black_and_white_active"),p(v,y,b)):(w.classList.add("black_and_white_active"),p(v,y,b)):alert("Image First")})}]);